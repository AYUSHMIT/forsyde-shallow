<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>6. Shallow-embedded signals</title><link rel="stylesheet" href="fptools.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.73.2"><link rel="start" href="index.html" title="ForSyDe tutorial"><link rel="up" href="index.html" title="ForSyDe tutorial"><link rel="prev" href="ar01s05.html" title="5. Using deep-embedded Signals"><link rel="next" href="apa.html" title="A. FSVecs: Vectors parameterized in size"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6. Shallow-embedded signals</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ar01s05.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="apa.html">Next</a></td></tr></table><hr></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="SE"></a>6. Shallow-embedded signals</h2></div></div></div>
    
    <p>
      As it was previously mentioned, ForSyDe offers a flavour of
      signals called shallow-embedded signals, modelled as
      streams of data:
    </p>

 	
    <pre class="programlisting">
data Signal a = NullS | a :- Signal a
    </pre>

    <p>
      This representation offers some advantages:
    </p>
    
    <div class="itemizedlist"><ul type="disc"><li>
	<p>
	  Rapid prototyping of systems.
	</p>
      </li><li>
	<p>
	  It is easy to include new MoCs.
	</p>
      </li><li>
	<p>
	  It supports all the MoCs covered by ForSyDe (Synchronous, Untimed and Continuous). 
	</p>
      </li></ul></div>

    <p>
      Shallow-embedded signals also present some disadvantages:
    </p>
    
    <div class="itemizedlist"><ul type="disc"><li>
	<p>
	  Systems built with them can only be
	  simulated. Shallow-embedded signals don't contain any
	  structural information. Thus, the models resulting from them
	  cannot be analyzed or compiled to other target languages.
	</p>
      </li><li>
	<p>
	  No support for components. However, they are not really needed, components are not
	  useful for simulation and reusability can be achieved by function refactoring.
	</p>
      </li></ul></div>
    
    <p>
      Here is the implementation of <span class="emphasis"><em>plus1</em></span> using shallow-embedded signals. 
    </p>
    
    	
    <pre class="programlisting">
module Plus1Shallow where

import ForSyDe.Shallow

import Data.Int(Int32)

plus1 :: Signal Int32 -&gt; Signal Int32
plus1 = mapSY (+1)
    </pre>
	  
    <p>
      The system can be simulated directly simply by calling <span class="emphasis"><em>plus1</em></span>.
    </p>

    <pre class="screen">
$ ghci Plus1Shallow.hs
*Plus1Shallow&gt; :t signal
signal :: [a] -&gt; Signal a
*Plus1Shallow&gt; plus1 (signal [1..10])
{2,3,4,5,6,7,8,9,10,11}
    </pre>
    
    <p>
      We can also integrate deep-embedded models into shallow-embedded
      ones by using <code class="code">simulate</code>, <code class="code">signal</code> and
      <code class="code">fromSignal</code> (the inverse of <code class="code">signal</code>).
      In the example below, we use the deep-embedded
      <code class="code">addFour</code> system and the shallow-embedded
      <code class="code">plus1</code> to build <span class="emphasis"><em>plus5</em></span>
    </p>
    
    <pre class="programlisting">
module Plus5 where

import Plus1Shallow
import AddFour

import ForSyDe (simulate)
import ForSyDe.Shallow

import Data.Int (Int32)

plus5 :: Signal Int32 -&gt; Signal Int32
plus5 = plus1 . signal . simulate addFourSysDef . fromSignal
    </pre>
    
    <pre class="screen">
$ ghci Plus5.hs      
*Plus5&gt; plus5 (signal [1..10])
{6,7,8,9,10,11,12,13,14,15}
    </pre>

  </div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s05.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="apa.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">5. Using deep-embedded Signals </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> A. <code class="literal">FSVec</code>s: Vectors parameterized in size</td></tr></table></div></body></html>
